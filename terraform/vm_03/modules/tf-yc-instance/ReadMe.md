# Module: `tf-yc-instance`

## Описание

Модуль Terraform `tf-yc-instance` создает виртуальную машину в Яндекс Облаке (Yandex Cloud). Этот модуль позволяет настроить количество процессоров, оперативную память, загрузочный диск, сетевой интерфейс и метаданные виртуальной машины.

## Зависимости

1. **Terraform версия**: Минимальная поддерживаемая версия Terraform — `0.12`.
2. **Провайдер Yandex Cloud**: Модуль требует наличия провайдера `yandex`.

## Провайдер

Модуль использует провайдер `yandex`, который настраивается в корневом модуле.

### Пример настройки провайдера

```hcl
provider "yandex" {
  # ID облака, в котором будут размещены ресурсы
  cloud_id  = var.cloud_id

  # ID папки в облаке, где будут размещены ресурсы
  folder_id = var.folder_id

  # ID зоны, в которой будут размещены ресурсы
  zone      = var.zone_id
}
```

### Параметры провайдера

1. **cloud_id:** Идентификатор облака, в котором будут создаваться ресурсы. Этот параметр определяет облако, в котором будут размещены ваши ресурсы.
2. **folder_id:** Идентификатор папки в облаке, где будут размещены ресурсы. Папки помогают организовать ресурсы внутри облака.
3. **zone:** Идентификатор зоны, в которой будут размещены ресурсы. Зона указывает физическое местоположение для создания ресурсов, что может влиять на доступность и производительность.

## Входные параметры (Inputs)

Имя	Описание	Тип	Дефолтное значение
name	Имя виртуальной машины.	string	"chapter5-lesson2-std-ext-010-33-1"
image_id	ID образа диска, используемого для создания ВМ.	string	— (Обязательный параметр)
subnet_id	ID подсети, к которой подключается виртуальная машина.	string	— (Обязательный параметр)

## Выходные параметры (Outputs)

Этот файл `outputs.tf` определяет выходные параметры для получения данных о созданных ресурсах. Эти параметры можно использовать в других модулях или для отображения в командной строке после применения конфигурации.

### Параметры

- **`module_internal_ip`**:
  - **Описание**: Внутренний IP-адрес виртуальной машины, созданной в модуле `yandex_compute_instance`.
  - **Тип**: `string`
  - **Значение**: `module.yandex_compute_instance.ip_address`

- **`module_external_ip`**:
  - **Описание**: Внешний IP-адрес виртуальной машины, созданной в модуле `yandex_compute_instance`.
  - **Тип**: `string`
  - **Значение**: `module.yandex_compute_instance.external_ip`

- **`module_vpc_subnets`**:
  - **Описание**: Список подсетей в Яндекс Облаке, полученных из модуля `yandex_cloud_network`. Это отображает информацию о подсетях, доступных в VPC.
  - **Тип**: `map`
  - **Значение**: `module.yandex_cloud_network.yandex_vpc_subnets`

### Пример использования

После применения конфигурации Terraform, выходные параметры можно использовать для получения информации о созданных ресурсах. Например, чтобы получить внешний IP-адрес виртуальной машины, можно использовать:

## Примечания

1. **Загрузочный диск:** В этом модуле используется network-ssd диск размером 40 ГБ.
2. **Сетевой интерфейс:** В текущей конфигурации NAT отключен (nat = false), что означает, что виртуальная машина будет доступна только внутри сети.
3. **Метаданные:** Скрипт для создания нового пользователя ansible и добавления его в группу sudo выполняется при создании виртуальной машины.
